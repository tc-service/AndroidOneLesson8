package com.technocopy.androidonelesson8;

import androidx.annotation.NonNull;
import androidx.appcompat.app.ActionBarDrawerToggle;
import androidx.appcompat.app.AppCompatActivity;
import androidx.appcompat.widget.Toolbar;
import androidx.core.view.GravityCompat;
import androidx.drawerlayout.widget.DrawerLayout;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;

import android.os.Bundle;
import android.view.MenuItem;
import android.widget.Toast;

import com.google.android.material.navigation.NavigationView;
import com.technocopy.androidonelesson8.observe.Publisher;
import com.technocopy.androidonelesson8.ui.CarNotesFragment;
import com.technocopy.androidonelesson8.ui.HealthNotesFragment;
import com.technocopy.androidonelesson8.ui.MyNotesFragment;

public class MainActivity extends AppCompatActivity {
    private Navigation navigation;
    private Publisher publisher = new Publisher();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        navigation = new Navigation(getSupportFragmentManager());
        initToolbar();

//        addFragment(MyNotesFragment.newInstance());
        getNavigation().addFragment(MyNotesFragment.newInstance(), false);
    }
    private void initToolbar() {
        Toolbar toolbar = findViewById(R.id.toolbar);
        setSupportActionBar(toolbar);
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        getSupportActionBar().setHomeButtonEnabled(true);
//        return toolbar;
    }

//    private void initView() {
//        Toolbar toolbar = initToolbar();
//        initDrawer(toolbar);
//        initMenus();
//    }

//    private void initMenus() {
//        Toolbar toolbar = findViewById(R.id.toolbar);
//        setSupportActionBar(toolbar);
//        initDrawer(toolbar);
//
//    }
//
//    // регистрация drawer
//    private void initDrawer(Toolbar toolbar) {
//        final DrawerLayout drawer = findViewById(R.id.drawer_layout);
//        ActionBarDrawerToggle toggle = new ActionBarDrawerToggle(
//                this, drawer, toolbar,
//                R.string.navigation_drawer_open,
//                R.string.navigation_drawer_close);
//        drawer.addDrawerListener(toggle);
//        toggle.syncState();
//
//        // Обработка навигационного меню
//        NavigationView navigationView = findViewById(R.id.nav_view);
//        navigationView.setNavigationItemSelectedListener(new NavigationView.OnNavigationItemSelectedListener() {
//            @Override
//            public boolean onNavigationItemSelected(@NonNull MenuItem item) {
//                int id = item.getItemId();
//                Toast.makeText(MainActivity.this, id, Toast.LENGTH_SHORT).show();
//
//                if (navigateFragment(id)){
//                    drawer.closeDrawer(GravityCompat.START);
//                    return true;
//                }
//                return false;
//            }
//        });
//    }
//
//
//
//
//    @Override
//    public boolean onOptionsItemSelected(MenuItem item) {
//        // Обработка выбора пункта меню приложения (активити)
//        int id = item.getItemId();
//        if (navigateFragment(id)) {
//            return true;
//        }
//        return super.onOptionsItemSelected(item);
//    }
//
//    private boolean navigateFragment(int id) {
//        switch (id) {
//            case R.id.nav_notes:
//                addFragment(new MyNotesFragment());
//                return true;
//            case R.id.nav_car:
//                addFragment(new CarNotesFragment());
//                return true;
//            case R.id.nav_health:
//                addFragment(new HealthNotesFragment());
//                return true;
//        }
//        return false;
//    }
//
//
//    private void addFragment(Fragment fragment) {
//        //Получить менеджер фрагментов
//        FragmentManager fragmentManager = getSupportFragmentManager();
//        // Открыть транзакцию
//        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
//        fragmentTransaction.replace(R.id.fragment_container, fragment);
//        fragmentTransaction.addToBackStack(null);
//        // Закрыть транзакцию
//        fragmentTransaction.commit();
//    }
@Override
public boolean onSupportNavigateUp() {
    onBackPressed();
    return true;
}

    public Navigation getNavigation() {
        return navigation;
    }

    public Publisher getPublisher() {
        return publisher;
    }
}